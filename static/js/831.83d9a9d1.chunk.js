"use strict";(self.webpackChunkfruteria_facturacion_inventario_frontend_react=self.webpackChunkfruteria_facturacion_inventario_frontend_react||[]).push([[831],{159:(t,e,a)=>{a.d(e,{P:()=>d});var n=a(43),l=a(926),r=a(579);const o=(0,n.lazy)(()=>a.e(23).then(a.bind(a,23))),d=t=>{let{children:e,urlBaseFrontend:a}=t;const{user:d}=(0,n.useContext)(l.c);return d.logged?(0,r.jsx)(o,{urlBaseFrontend:a}):e}},160:(t,e,a)=>{a.d(e,{J:()=>n});const n=async t=>{let e;return await fetch(t).then(t=>t.json()).then(t=>e=t),e}},266:(t,e,a)=>{a.d(e,{K:()=>n});const n=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0})},415:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.d(e,{q:()=>z});var l=a(43),r=a(160),o=a(266),d=a(448),i=a(777),s=a(683),c=a(596),u=a(579);const m=new Date,f="Jorge",b="https://jorgelmunozp.github.io/fruteria-facturacion-inventario-backend-node/inventario.json",x="https://jorgelmunozp.github.io/fruteria-facturacion-inventario-backend-node/factura.json",j="https://jorgelmunozp.github.io/fruteria-facturacion-inventario-backend-node/proveedores.json",p="https://jorgelmunozp.github.io/fruteria-facturacion-inventario-backend-node/descuentos.json";let g=await(0,r.J)(b),v=await(0,r.J)(x),k=await(0,r.J)(j),y=await(0,r.J)(p);const F=(t,e,a,n,l,r)=>{let o,d;const i=document.querySelector('input[name="frutaDeseada"]:checked'),s=document.getElementById("cantidadDeseada");if(null!==i&&"0"!==s.value){o=i.value,d=s.value;for(let e in g)o.toLowerCase()===g[e].detail.nombre.toLowerCase()&&(d<=g[e].detail.cantidad?(n[e](d),l[e](N(d,k[e].detail.valorkilo))):d>g[e].detail.cantidad&&(n[e](g[e].detail.cantidad),l[e](N(d,k[0].detail.valorkilo)),t("Hay "+g[0].detail.cantidad+" kilos")),r[e](d*k[e].detail.valorkilo-N(d,k[e].detail.valorkilo))),console.log("frutaSelector.value: ",i.value),console.log("inventario[i].detail.nombre: ",g[e].detail.nombre),console.log("document.getElementById(inventario[i].detail.nombre): ",document.getElementById(g[e].detail.nombre)),document.getElementById(g[e].detail.nombre).checked=!1;s.value=0,t("");for(let t in g)c.detalle[t].fruta.kilos=e[t],c.detalle[t].fruta.subtotal=e[t]*k[t].detail.valorkilo,c.detalle[t].fruta.descuento=a[t],c.detalle[t].fruta.total=c.detalle[t].fruta.subtotal-a[t];console.log("carrito actualizado carrito.json: ",c)}else null===i?t("Elige fruta"):"0"===s.value&&t("Ingresa kilos")},N=(t,e)=>{let a;return t>=0&&t<=2?a=t*e*y[0].detail.descuento:t>2&&t<=5?a=t*e*y[1].detail.descuento/100:t>5&&t<=10?a=t*e*y[2].detail.descuento/100:t>10&&(a=t*e*y[3].detail.descuento/100),a},w=(t,e,a,n,l,r,o,d,i)=>{for(let s in g)0!==n[s]&&(n[s]<=g[s].detail.cantidad?g[s].detail.cantidad=g[s].detail.cantidad-n[0]:n[s]>g[s].detail.cantidad&&(g[s].detail.cantidad=0),g[s].detail.ventas++,g[s].detail.kilos=parseInt(g[s].detail.kilos)+parseInt(n[s]),g[s].detail.total=parseInt(g[s].detail.total)+parseInt(r[s]));if(0!==n[0]||0!==n[1]||0!==n[2]||0!==n[3]){v.id++,v.vendedor=f;for(let t in g)v.detalle[t].fruta.kilos=n[t],v.detalle[t].fruta.precio=k[t].detail.valorkilo,v.detalle[t].fruta.subtotal=n[t]*k[t].detail.valorkilo,v.detalle[t].fruta.descuento=l[t],v.detalle[t].fruta.total=r[t];C(g),K(v),e(r[0]+r[1]+r[2]+r[3]),S(t,a);for(let t in g)o[t](0),d[t](0),i[t](0)}};function C(t){for(let e in t)fetch(b+"/"+(Number(e)+Number(1)),{method:"PUT",body:JSON.stringify({detail:{nombre:t[e].detail.nombre,cantidad:t[e].detail.cantidad,ventas:t[e].detail.ventas,kilos:t[e].detail.kilos,total:t[e].detail.total}}),headers:{"Content-type":"application/json"}}).then(t=>t.json())}function K(t){fetch(x,{method:"PUT",body:JSON.stringify({id:t.id,vendedor:f,detalle:[{fruta:{nombre:t.detalle[0].fruta.nombre,kilos:t.detalle[0].fruta.kilos,precio:t.detalle[0].fruta.precio,subtotal:t.detalle[0].fruta.subtotal,descuento:t.detalle[0].fruta.descuento,total:t.detalle[0].fruta.total},id:1},{fruta:{nombre:t.detalle[1].fruta.nombre,kilos:t.detalle[1].fruta.kilos,precio:t.detalle[1].fruta.precio,subtotal:t.detalle[1].fruta.subtotal,descuento:t.detalle[1].fruta.descuento,total:t.detalle[1].fruta.total},id:2},{fruta:{nombre:t.detalle[2].fruta.nombre,kilos:t.detalle[2].fruta.kilos,precio:t.detalle[2].fruta.precio,subtotal:t.detalle[2].fruta.subtotal,descuento:t.detalle[2].fruta.descuento,total:t.detalle[2].fruta.total},id:3},{fruta:{nombre:t.detalle[3].fruta.nombre,kilos:t.detalle[3].fruta.kilos,precio:t.detalle[3].fruta.precio,subtotal:t.detalle[3].fruta.subtotal,descuento:t.detalle[3].fruta.descuento,total:t.detalle[3].fruta.total},id:4}]}),headers:{"Content-type":"application/json"}}).then(t=>t.json())}function S(t,e){'\n                 <style>\n                 *{\n                   font: 20px \'Century Gothic\';\n                   text-align: center;\n                 }\n                 #header{\t\t\t\t\t\t\t/***** Contenedor div del header *****/\n                   background: url("http://localhost:3001/images/banner.jpg") no-repeat;\n                   background-size:cover;\n                   width:100%;\n                   height: 80px;\n                   margin-left: auto;\n                   margin-right:auto;\n                 }\n                 #contenidoHeader{\n                   margin-left: auto;\n                   margin-right:auto;\n                 }\n                 #header img{\t\t\t\t\t\t\t\t          /***** Logo header *****/\n                   width: 50px;\n                   filter: drop-shadow(2px 2px 2px rgba(255, 255, 255, 1));\n                 }\n                 #header h1 {\t\t\t\t\t\t\t\t        /***** Titulo header *****/\n                   font-size: 32px;\n                   color: white;\n                   text-shadow: 1px 1px 1px rgba(0, 0, 0, 1);\n                   letter-spacing: 2px;\n                   margin-top: 15px;\n                 }\n                 #body{ font-size: 20px; }\n                 #datosFactura{\n                   width:100%;\n                   margin-left: auto;\n                   margin-right:auto;\n                 }\n                 \n                 #detalleFactura{\n                   width:100%;\n                   margin-left: auto;\n                   margin-right:auto;\n                   border-collapse: collapse;\n                 }\n                 #detalleFactura th,#detalleFactura td{\n                   border: 1px solid lightgray;\n                 }\n                 #detalleFactura th{\n                   color: white;\n                   background-color: #600;\n                 }\n                 #detalleFactura tr:nth-child(even){background-color: #f2f2f2;}\n                 #detalleFactura tr:hover {background-color: #ddd;}\n\n                 #totalFactura{\n                   width:100%;\n                   border-collapse: collapse;\n                 }\n                 #totalFactura td{\n                   border: 1px solid lightgray;\n                   text-align: right;\n                 }\n                 .totalFactura{\n                   color: white;\n                   background-color: #600!important;\n                 }\n                 #totalFactura tr:nth-child(even){background-color: #ddd;}\n                 #totalFactura tr:hover {background-color: #f2f2f2;}\n               </style>\n               <header>\n                 <div id="header">\n                 <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n                   <table id="contenidoHeader">\n                     <th>\n                       <td><img src="http://localhost:3001/images/logo.png" id="logo"/></td>\n                       <td><h1> Fruter\xeda </h1></td>\n                     </th>\n                   </table>\n                 </div>\n               </header>\n               <body>\n                 <div id="body">\n                   <p>Bienvenido a nuestra fruter\xeda</p>\n                   <h1>Factura de Venta N\xb0 '.concat(v.id,'</h1>\n                   <table id="datosFactura">\n                     <tr>\n                       <td>Fecha: ').concat(m.toLocaleDateString(),"</td>\n                       <td>Hora: ").concat(m.toLocaleTimeString(),"</td>\n                     </tr>  \n                   </table>\n                   <p>Vendedor: ").concat(f,'</p>\n                   <h1>Detalle</h1>\n                   <table id="detalleFactura">\n                     <tr>\n                       <th>Fruta</th>\n                       <th>Cantidad</th>\n                       <th>Precio</th>\n                       <th>Subtotal</th>\n                       <th>Descuento</th>\n                       <th>Total</th>\t\n                     </tr>\n                     <tr>\n                       <td>').concat(c.detalle[0].fruta.nombre,"</td>\n                       <td>").concat(d.f.format(c.detalle[0].fruta.kilos),"</td>\n                       <td>").concat(o.K.format(c.detalle[0].fruta.precio),"</td>\n                       <td>").concat(o.K.format(c.detalle[0].fruta.subtotal),"</td>\n                       <td>").concat(o.K.format(c.detalle[0].fruta.descuento),"</td>\n                       <td>").concat(o.K.format(c.detalle[0].fruta.total),"</td>\n                     </tr>\n                     <tr>\n                       <td>").concat(c.detalle[1].fruta.nombre,"</td>\n                       <td>").concat(d.f.format(c.detalle[1].fruta.kilos),"</td>\n                       <td>").concat(o.K.format(c.detalle[1].fruta.precio),"</td>\n                       <td>").concat(o.K.format(c.detalle[1].fruta.subtotal),"</td>\n                       <td>").concat(o.K.format(c.detalle[1].fruta.descuento),"</td>\n                       <td>").concat(o.K.format(c.detalle[1].fruta.total),"</td>\n                     </tr>\t\n                     <tr>\n                       <td>").concat(c.detalle[2].fruta.nombre,"</td>\n                       <td>").concat(d.f.format(c.detalle[2].fruta.kilos),"</td>\n                       <td>").concat(o.K.format(c.detalle[2].fruta.precio),"</td>\n                       <td>").concat(o.K.format(c.detalle[2].fruta.subtotal),"</td>\n                       <td>").concat(o.K.format(c.detalle[2].fruta.descuento),"</td>\n                       <td>").concat(o.K.format(c.detalle[2].fruta.total),"</td>\n                     </tr>\n                     <tr>\n                       <td>").concat(c.detalle[3].fruta.nombre,"</td>\n                       <td>").concat(d.f.format(c.detalle[3].fruta.kilos),"</td>\n                       <td>").concat(o.K.format(c.detalle[3].fruta.precio),"</td>\n                       <td>").concat(o.K.format(c.detalle[3].fruta.subtotal),"</td>\n                       <td>").concat(o.K.format(c.detalle[3].fruta.descuento),"</td>\n                       <td>").concat(o.K.format(c.detalle[3].fruta.total),'</td>\n                     </tr>\t\t\n                   </table>\n                   <br></br>\n                   <table id="totalFactura">\n                     <tr>\n                         <td>Subtotal</td>\n                         <td>').concat(o.K.format(t-.16*t),"</td>\n                     <tr>\n                       <td>IVA</td>\n                       <td>").concat(o.K.format(.16*t),'</td>\n                     <tr>\n                       <td class="totalFactura">Total a pagar</td>\n                       <td class="totalFactura">').concat(o.K.format(t),"</td>    \n                   </table>\n                 </div>\n               </body>\n               <footer>\n               </footer>\n ");e("Ver Factura PDF")}const z=()=>{const[t,e]=(0,l.useState)(0),[a,n]=(0,l.useState)(0),[r,o]=(0,l.useState)(0),[d,c]=(0,l.useState)(0),[h,m]=(0,l.useState)(0),[f,b]=(0,l.useState)(0),[x,j]=(0,l.useState)(0),[p,g]=(0,l.useState)(0),[v,N]=(0,l.useState)(0),[C,K]=(0,l.useState)(0),[S,z]=(0,l.useState)(0),[D,I]=(0,l.useState)(0),[P,T]=(0,l.useState)(0),[B,q]=(0,l.useState)(""),[L,_]=(0,l.useState)(""),J=[t,a,r,d],A=[h,f,x,p],O=[v,C,S,D],V=[e,n,o,c],E=[m,b,j,g],H=[N,K,z,I];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("center",{children:(0,u.jsx)("h5",{className:"my-4",children:"Facturaci\xf3n"})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{children:(0,u.jsxs)("center",{children:[(0,u.jsx)("div",{children:(0,u.jsxs)("table",{className:"table table-sm table-bordered table-striped w-100",children:[(0,u.jsx)("thead",{className:"thead-light",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Fruta"}),(0,u.jsx)("th",{children:"Cantidad"}),(0,u.jsx)("th",{children:"Agregar"})]})}),(0,u.jsx)("tbody",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("center",{children:(0,u.jsx)("table",{id:"grupoFrutas",children:(0,u.jsx)("tbody",{children:k.map(t=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"radio",name:"frutaDeseada",value:t.detail.nombre,id:t.detail.nombre,onChange:()=>q("")})}),(0,u.jsx)("td",{children:(0,u.jsx)("label",{htmlFor:t.detail.nombre,children:t.detail.nombre})})]},t.detail.nombre))})})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{id:"cantidadDeseada",type:"number",name:"cantidadDeseada",defaultValue:0,min:"0",placeholder:"Kilos fruta",autoComplete:"off",onChange:()=>q(""),className:"w-100 py-5"})}),(0,u.jsxs)("td",{children:[(0,u.jsx)("button",{className:"w-100 py-1 px-3",onClick:()=>F(q,J,A,V,E,H),children:(0,u.jsx)(i.RTc,{className:"fs-3 my-3"})}),(0,u.jsx)("p",{className:"text-dark",children:B})]})]})})]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h5",{className:"my-4",children:"Carrito de Compras"}),(0,u.jsx)(s.s,{cantidadFrutas:J,descuentoFrutas:A,proveedores:k}),(0,u.jsx)("table",{className:"w-100",children:(0,u.jsx)("tbody",{children:(0,u.jsx)("tr",{children:(0,u.jsxs)("td",{colSpan:"6",children:[(0,u.jsx)("button",{className:"w-100 py-2",onClick:()=>w(P,T,_,J,A,O,V,E,H),children:"Facturar"}),(0,u.jsx)("button",{className:"w-100 py-2",children:"Cancelar"})]})})})}),(0,u.jsx)("h5",{className:"my-4",children:"Descuentos"}),(0,u.jsx)("div",{className:"overflow-auto",children:(0,u.jsxs)("table",{className:"table table-sm table-bordered table-striped w-100",children:[(0,u.jsx)("thead",{className:"thead-light",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Cantidad (Kilos)"}),(0,u.jsx)("th",{children:"Descuento"})]})}),(0,u.jsx)("tbody",{children:y.map((t,e)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t.detail.cantidad}),(0,u.jsx)("td",{children:t.detail.descuento})]},"desc"+e))})]})}),(0,u.jsx)("a",{href:"/facturas/factura.pdf",target:"_blank",children:(0,u.jsx)("p",{children:L})})]}),(0,u.jsx)("hr",{})]})})})]})};n()}catch(h){n(h)}},1)},448:(t,e,a)=>{a.d(e,{f:()=>n});const n=new Intl.NumberFormat("es-CO",{style:"decimal",minimumFractionDigits:0})},596:t=>{t.exports=JSON.parse('{"detalle":[{"fruta":{"nombre":"Manzanas","kilos":0,"precio":4200,"subtotal":0,"descuento":0,"total":0},"id":1},{"fruta":{"nombre":"Bananos","kilos":0,"precio":2200,"subtotal":0,"descuento":0,"total":0},"id":2},{"fruta":{"nombre":"Mangos","kilos":0,"precio":3500,"subtotal":0,"descuento":0,"total":0},"id":3},{"fruta":{"nombre":"Fresas","kilos":0,"precio":2700,"subtotal":0,"descuento":0,"total":0},"id":4}],"totalAPagar":0}')},683:(t,e,a)=>{a.d(e,{s:()=>o});var n=a(266),l=a(448),r=a(579);const o=t=>{let{cantidadFrutas:e,descuentoFrutas:a,proveedores:o}=t;return(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"table table-sm table-bordered table-striped w-100",children:[(0,r.jsx)("thead",{className:"thead-light",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Fruta"}),(0,r.jsx)("th",{children:"Kilos"}),(0,r.jsx)("th",{children:"Precio"}),(0,r.jsx)("th",{children:"Subtotal"}),(0,r.jsx)("th",{children:"Descuento"}),(0,r.jsx)("th",{children:"Total"})]})}),(0,r.jsxs)("tbody",{children:[o.map((t,o)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.detail.nombre}),(0,r.jsx)("td",{children:l.f.format(e[o])}),(0,r.jsx)("td",{children:n.K.format(t.detail.valorkilo)}),(0,r.jsx)("td",{children:n.K.format(e[o]*t.detail.valorkilo)}),(0,r.jsx)("td",{children:n.K.format(a[o])}),(0,r.jsx)("td",{children:n.K.format(e[o]*t.detail.valorkilo-a[o])})]},o)),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"5",className:"totalCarrito",children:"Total a pagar"}),(0,r.jsx)("td",{className:"totalCarrito",children:n.K.format(e[0]*o[0].detail.valorkilo-a[0]+e[1]*o[1].detail.valorkilo-a[1]+e[2]*o[2].detail.valorkilo-a[2]+e[3]*o[3].detail.valorkilo-a[3])})]})]})]})})}},707:(t,e,a)=>{a.d(e,{F:()=>s});var n=a(43),l=a(924),r=a(926),o=a(663),d=a(579);const i=(0,n.lazy)(()=>a.e(468).then(a.bind(a,468))),s=t=>{let{Logo:e,urlBaseFrontend:a,myColor:s,myTitle:c}=t;const{user:u,dispatch:h}=(0,n.useContext)(r.c),m=(0,l.Zp)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("nav",{className:"navbar navbar-expand-sm navbar-light bg-white shadow-lg user-select-none",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsx)(l.k2,{to:"/"+a,children:(0,d.jsx)(e,{color:s,width:1.5,height:1.5,strokeWidth:.5,className:"navbar-brand ms-3 me-0"})}),(0,d.jsx)(l.k2,{className:"navbar-brand",to:"/"+a,children:(0,d.jsx)("span",{className:"main-color",children:c})}),(0,d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarContent","aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,d.jsx)(i,{color:s,height:1.05,width:1.05,strokeWidth:10})}),(0,d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarContent",children:[(0,d.jsx)("div",{className:"navbar-nav",children:u.logged?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.k2,{className:t=>{let{isActive:e}=t;return"nav-item nav-link "+(e?"active":"")},to:a+"/inventario",children:"Inventario"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.k2,{className:t=>{let{isActive:e}=t;return"nav-item nav-link "+(e?"active":"")},to:a+"/facturacion",children:"Facturaci\xf3n"}),(0,d.jsx)(l.k2,{className:t=>{let{isActive:e}=t;return"nav-item nav-link "+(e?"active":"")},to:a+"/carrito",children:"Carrito"})]})}),(0,d.jsx)("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2 d-flex justify-content-end",children:(0,d.jsxs)("ul",{className:"navbar-nav ml-auto",children:[(0,d.jsx)("span",{className:"nav-item nav-link main-text",children:u.logged?u.name:""}),(0,d.jsx)(l.k2,{className:t=>{let{isActive:e}=t;return"nav-item nav-link "+(e?"active":"")},onClick:()=>{h({type:o.g.logout}),m(a,{replace:!0})},to:a+"/login",children:u.logged?"Salir":"Ingresar"})]})})]})]})})})}},831:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.r(e),a.d(e,{AppRouter:()=>j,default:()=>p});var l=a(43),r=a(924),o=a(707),d=a(415),i=a(159),s=a(213),c=a(579),u=t([d]);d=(u.then?(await u)():u)[0];const h=(0,l.lazy)(()=>a.e(125).then(a.bind(a,125))),m=(0,l.lazy)(()=>a.e(23).then(a.bind(a,23))),f=(0,l.lazy)(()=>a.e(767).then(a.bind(a,767))),b=(0,l.lazy)(()=>a.e(842).then(a.bind(a,842))),x="fruteria-facturacion-inventario-frontend-react",j=t=>{let{Logo:e,theme:a,handleTheme:n}=t;return(0,c.jsxs)(r.Kd,{children:[(0,c.jsx)(o.F,{Logo:e,urlBaseFrontend:x,myColor:s.e,myTitle:s.v}),(0,c.jsx)("div",{className:"container user-select-none",children:(0,c.jsxs)(r.BV,{children:[(0,c.jsx)(r.qh,{path:x+"/facturacion",element:(0,c.jsx)(i.P,{children:(0,c.jsx)(d.q,{})})}),(0,c.jsx)(r.qh,{path:x+"/carrito",element:(0,c.jsx)(i.P,{children:(0,c.jsx)(f,{})})}),(0,c.jsx)(r.qh,{path:x+"/login",element:(0,c.jsx)(i.P,{children:(0,c.jsx)(b,{myTitle:s.v,myColor:s.e})})}),(0,c.jsx)(r.qh,{path:"/"+x,element:(0,c.jsx)(i.P,{children:(0,c.jsx)(d.q,{})})}),(0,c.jsx)(r.qh,{path:"/",element:(0,c.jsx)(i.P,{children:(0,c.jsx)(d.q,{})})}),(0,c.jsx)(r.qh,{path:"/*",element:(0,c.jsx)(h,{children:(0,c.jsx)(m,{urlBaseFrontend:x})})})]})})]})},p=j;n()}catch(h){n(h)}})}}]);
//# sourceMappingURL=831.83d9a9d1.chunk.js.map